import antarex.libvc.LibVC;

aspectdef SimpleLibVC

	input
		name, $target, options
	end

	var lvcOptions = new LibVCOptions();
	for (var opt of options) {
		lvcOptions.addOptionLiteral(opt.name, opt.value, opt.value);
	}

	/* instantiate the LibVC object */
	var $function = $target.definition;
	var lvc = new LibVC($function, {logFile:"./log.txt"}, name);

	/* set the options defined before */
	lvc.setOptions(lvcOptions);

	lvc.setErrorStrategyExit();

	lvc.replaceCall($target);
end
