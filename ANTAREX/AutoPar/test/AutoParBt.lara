import clava.autopar.Parallelize;

/**
 * @test
 */

aspectdef ApplyAutopar

	var $loops = [];
	select file.loop end
	apply
		$loops.push($loop);
	end
	    
	Parallelize.forLoops($loops);

	// Check pragmas of parallelized loops
	var ompPragmas = "";
	select pragma end
	apply
		if($pragma.name !== "omp") {
			continue;
		}
		
		ompPragmas += $pragma.code + "\n";
	end
	
	println("OMP Pragmas:" + ompPragmas);
	
end


